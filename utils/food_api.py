"""
–ú–æ–¥—É–ª—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenFoodFacts API + –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –±–∞–∑—É –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
"""
import aiohttp
from typing import Optional, Dict, Any, List
from googletrans import Translator

# –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–∫–∞–ª–æ—Ä–∏–∏ –Ω–∞ 100–≥)
# –î–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç–∏
FOOD_DATABASE = {
    # –§—Ä—É–∫—Ç—ã
    "–±–∞–Ω–∞–Ω": {"name": "–ë–∞–Ω–∞–Ω", "calories": 89, "emoji": "üçå"},
    "—è–±–ª–æ–∫–æ": {"name": "–Ø–±–ª–æ–∫–æ", "calories": 52, "emoji": "üçé"},
    "–∞–ø–µ–ª—å—Å–∏–Ω": {"name": "–ê–ø–µ–ª—å—Å–∏–Ω", "calories": 47, "emoji": "üçä"},
    "–≥—Ä—É—à–∞": {"name": "–ì—Ä—É—à–∞", "calories": 57, "emoji": "üçê"},
    "–≤–∏–Ω–æ–≥—Ä–∞–¥": {"name": "–í–∏–Ω–æ–≥—Ä–∞–¥", "calories": 67, "emoji": "üçá"},
    "–∫–ª—É–±–Ω–∏–∫–∞": {"name": "–ö–ª—É–±–Ω–∏–∫–∞", "calories": 33, "emoji": "üçì"},
    "–∞—Ä–±—É–∑": {"name": "–ê—Ä–±—É–∑", "calories": 30, "emoji": "üçâ"},
    "–º–∞–Ω–≥–æ": {"name": "–ú–∞–Ω–≥–æ", "calories": 60, "emoji": "ü•≠"},
    "–∞–Ω–∞–Ω–∞—Å": {"name": "–ê–Ω–∞–Ω–∞—Å", "calories": 50, "emoji": "üçç"},
    "–∫–∏–≤–∏": {"name": "–ö–∏–≤–∏", "calories": 61, "emoji": "ü•ù"},
    "–ø–µ—Ä—Å–∏–∫": {"name": "–ü–µ—Ä—Å–∏–∫", "calories": 39, "emoji": "üçë"},
    "—Å–ª–∏–≤–∞": {"name": "–°–ª–∏–≤–∞", "calories": 46, "emoji": "ü´ê"},
    "–ª–∏–º–æ–Ω": {"name": "–õ–∏–º–æ–Ω", "calories": 29, "emoji": "üçã"},
    "–≥—Ä–µ–π–ø—Ñ—Ä—É—Ç": {"name": "–ì—Ä–µ–π–ø—Ñ—Ä—É—Ç", "calories": 42, "emoji": "üçä"},
    
    # –û–≤–æ—â–∏
    "–ø–æ–º–∏–¥–æ—Ä": {"name": "–ü–æ–º–∏–¥–æ—Ä", "calories": 18, "emoji": "üçÖ"},
    "–æ–≥—É—Ä–µ—Ü": {"name": "–û–≥—É—Ä–µ—Ü", "calories": 15, "emoji": "ü•í"},
    "–º–æ—Ä–∫–æ–≤—å": {"name": "–ú–æ—Ä–∫–æ–≤—å", "calories": 41, "emoji": "ü•ï"},
    "–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å": {"name": "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å", "calories": 77, "emoji": "ü•î"},
    "–∫–∞–ø—É—Å—Ç–∞": {"name": "–ö–∞–ø—É—Å—Ç–∞", "calories": 25, "emoji": "ü•¨"},
    "–±—Ä–æ–∫–∫–æ–ª–∏": {"name": "–ë—Ä–æ–∫–∫–æ–ª–∏", "calories": 34, "emoji": "ü•¶"},
    "–ª—É–∫": {"name": "–õ—É–∫", "calories": 40, "emoji": "üßÖ"},
    "—á–µ—Å–Ω–æ–∫": {"name": "–ß–µ—Å–Ω–æ–∫", "calories": 149, "emoji": "üßÑ"},
    "–ø–µ—Ä–µ—Ü": {"name": "–ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π", "calories": 27, "emoji": "üå∂Ô∏è"},
    "–±–∞–∫–ª–∞–∂–∞–Ω": {"name": "–ë–∞–∫–ª–∞–∂–∞–Ω", "calories": 25, "emoji": "üçÜ"},
    "–∫–∞–±–∞—á–æ–∫": {"name": "–ö–∞–±–∞—á–æ–∫", "calories": 17, "emoji": "ü•í"},
    "—Å–≤–µ–∫–ª–∞": {"name": "–°–≤—ë–∫–ª–∞", "calories": 43, "emoji": "üç†"},
    "—à–ø–∏–Ω–∞—Ç": {"name": "–®–ø–∏–Ω–∞—Ç", "calories": 23, "emoji": "ü•¨"},
    "—Å–∞–ª–∞—Ç": {"name": "–°–∞–ª–∞—Ç –ª–∏—Å—Ç–æ–≤–æ–π", "calories": 15, "emoji": "ü•ó"},
    
    # –ú—è—Å–æ –∏ –ø—Ç–∏—Ü–∞
    "–∫—É—Ä–∏—Ü–∞": {"name": "–ö—É—Ä–∏—Ü–∞ (–≥—Ä—É–¥–∫–∞)", "calories": 165, "emoji": "üçó"},
    "–∫—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞": {"name": "–ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞", "calories": 165, "emoji": "üçó"},
    "–≥–æ–≤—è–¥–∏–Ω–∞": {"name": "–ì–æ–≤—è–¥–∏–Ω–∞", "calories": 250, "emoji": "ü•©"},
    "—Å–≤–∏–Ω–∏–Ω–∞": {"name": "–°–≤–∏–Ω–∏–Ω–∞", "calories": 242, "emoji": "ü•ì"},
    "–∏–Ω–¥–µ–π–∫–∞": {"name": "–ò–Ω–¥–µ–π–∫–∞", "calories": 135, "emoji": "ü¶É"},
    "–±–∞—Ä–∞–Ω–∏–Ω–∞": {"name": "–ë–∞—Ä–∞–Ω–∏–Ω–∞", "calories": 294, "emoji": "üçñ"},
    "—É—Ç–∫–∞": {"name": "–£—Ç–∫–∞", "calories": 337, "emoji": "ü¶Ü"},
    "–∫–æ–ª–±–∞—Å–∞": {"name": "–ö–æ–ª–±–∞—Å–∞ –≤–∞—Ä—ë–Ω–∞—è", "calories": 260, "emoji": "üå≠"},
    "—Å–æ—Å–∏—Å–∫–∏": {"name": "–°–æ—Å–∏—Å–∫–∏", "calories": 277, "emoji": "üå≠"},
    "–≤–µ—Ç—á–∏–Ω–∞": {"name": "–í–µ—Ç—á–∏–Ω–∞", "calories": 145, "emoji": "ü•ì"},
    
    # –†—ã–±–∞ –∏ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã
    "—Ä—ã–±–∞": {"name": "–†—ã–±–∞ (—Å—Ä–µ–¥–Ω—è—è)", "calories": 120, "emoji": "üêü"},
    "–ª–æ—Å–æ—Å—å": {"name": "–õ–æ—Å–æ—Å—å", "calories": 208, "emoji": "üç£"},
    "—Ç—É–Ω–µ—Ü": {"name": "–¢—É–Ω–µ—Ü", "calories": 132, "emoji": "üêü"},
    "—Ç—Ä–µ—Å–∫–∞": {"name": "–¢—Ä–µ—Å–∫–∞", "calories": 82, "emoji": "üêü"},
    "–∫—Ä–µ–≤–µ—Ç–∫–∏": {"name": "–ö—Ä–µ–≤–µ—Ç–∫–∏", "calories": 99, "emoji": "ü¶ê"},
    "–∫–∞–ª—å–º–∞—Ä": {"name": "–ö–∞–ª—å–º–∞—Ä", "calories": 92, "emoji": "ü¶ë"},
    "—Å–µ–ª—å–¥—å": {"name": "–°–µ–ª—å–¥—å", "calories": 158, "emoji": "üêü"},
    "—Å–∫—É–º–±—Ä–∏—è": {"name": "–°–∫—É–º–±—Ä–∏—è", "calories": 205, "emoji": "üêü"},
    
    # –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
    "–º–æ–ª–æ–∫–æ": {"name": "–ú–æ–ª–æ–∫–æ 2.5%", "calories": 52, "emoji": "ü•õ"},
    "–∫–µ—Ñ–∏—Ä": {"name": "–ö–µ—Ñ–∏—Ä 2.5%", "calories": 50, "emoji": "ü•õ"},
    "–π–æ–≥—É—Ä—Ç": {"name": "–ô–æ–≥—É—Ä—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π", "calories": 60, "emoji": "ü•õ"},
    "—Ç–≤–æ—Ä–æ–≥": {"name": "–¢–≤–æ—Ä–æ–≥ 5%", "calories": 121, "emoji": "üßÄ"},
    "—Å—ã—Ä": {"name": "–°—ã—Ä —Ç–≤—ë—Ä–¥—ã–π", "calories": 350, "emoji": "üßÄ"},
    "—Å–º–µ—Ç–∞–Ω–∞": {"name": "–°–º–µ—Ç–∞–Ω–∞ 20%", "calories": 206, "emoji": "ü•õ"},
    "–º–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ": {"name": "–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ", "calories": 748, "emoji": "üßà"},
    "–º–æ—Ä–æ–∂–µ–Ω–æ–µ": {"name": "–ú–æ—Ä–æ–∂–µ–Ω–æ–µ", "calories": 207, "emoji": "üç¶"},
    
    # –ö—Ä—É–ø—ã –∏ –∑–ª–∞–∫–∏
    "—Ä–∏—Å": {"name": "–†–∏—Å (–≤–∞—Ä—ë–Ω—ã–π)", "calories": 130, "emoji": "üçö"},
    "–≥—Ä–µ—á–∫–∞": {"name": "–ì—Ä–µ—á–∫–∞ (–≤–∞—Ä—ë–Ω–∞—è)", "calories": 110, "emoji": "üåæ"},
    "–æ–≤—Å—è–Ω–∫–∞": {"name": "–û–≤—Å—è–Ω–∫–∞ (–≤–∞—Ä—ë–Ω–∞—è)", "calories": 88, "emoji": "ü•£"},
    "–º–∞–∫–∞—Ä–æ–Ω—ã": {"name": "–ú–∞–∫–∞—Ä–æ–Ω—ã (–≤–∞—Ä—ë–Ω—ã–µ)", "calories": 131, "emoji": "üçù"},
    "—Ö–ª–µ–±": {"name": "–•–ª–µ–± –±–µ–ª—ã–π", "calories": 265, "emoji": "üçû"},
    "—Ö–ª–µ–± —á–µ—Ä–Ω—ã–π": {"name": "–•–ª–µ–± —á—ë—Ä–Ω—ã–π", "calories": 201, "emoji": "üçû"},
    "–∫–∞—à–∞": {"name": "–ö–∞—à–∞ –º–æ–ª–æ—á–Ω–∞—è", "calories": 100, "emoji": "ü•£"},
    "–ø—à–µ–Ω–æ": {"name": "–ü—à–µ–Ω–æ (–≤–∞—Ä—ë–Ω–æ–µ)", "calories": 90, "emoji": "üåæ"},
    "–ø–µ—Ä–ª–æ–≤–∫–∞": {"name": "–ü–µ—Ä–ª–æ–≤–∫–∞ (–≤–∞—Ä—ë–Ω–∞—è)", "calories": 109, "emoji": "üåæ"},
    
    # –ù–∞–ø–∏—Ç–∫–∏
    "–∫–æ—Ñ–µ": {"name": "–ö–æ—Ñ–µ –±–µ–∑ —Å–∞—Ö–∞—Ä–∞", "calories": 2, "emoji": "‚òï"},
    "–∫–∞–ø—É—á–∏–Ω–æ": {"name": "–ö–∞–ø—É—á–∏–Ω–æ", "calories": 45, "emoji": "‚òï"},
    "–ª–∞—Ç—Ç–µ": {"name": "–õ–∞—Ç—Ç–µ", "calories": 60, "emoji": "‚òï"},
    "—á–∞–π": {"name": "–ß–∞–π –±–µ–∑ —Å–∞—Ö–∞—Ä–∞", "calories": 1, "emoji": "üçµ"},
    "—Å–æ–∫ –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π": {"name": "–°–æ–∫ –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π", "calories": 45, "emoji": "üßÉ"},
    "–∫–æ–ª–∞": {"name": "–ö–æ–∫–∞-–∫–æ–ª–∞", "calories": 42, "emoji": "ü•§"},
    "–ø–∏–≤–æ": {"name": "–ü–∏–≤–æ —Å–≤–µ—Ç–ª–æ–µ", "calories": 43, "emoji": "üç∫"},
    "–≤–∏–Ω–æ": {"name": "–í–∏–Ω–æ –∫—Ä–∞—Å–Ω–æ–µ", "calories": 85, "emoji": "üç∑"},
    
    # –í—ã–ø–µ—á–∫–∞ –∏ —Å–ª–∞–¥–æ—Å—Ç–∏
    "—Ç–æ—Ä—Ç": {"name": "–¢–æ—Ä—Ç", "calories": 350, "emoji": "üéÇ"},
    "–ø–∏—Ä–æ–∂–Ω–æ–µ": {"name": "–ü–∏—Ä–æ–∂–Ω–æ–µ", "calories": 320, "emoji": "üßÅ"},
    "–ø–µ—á–µ–Ω—å–µ": {"name": "–ü–µ—á–µ–Ω—å–µ", "calories": 450, "emoji": "üç™"},
    "—à–æ–∫–æ–ª–∞–¥": {"name": "–®–æ–∫–æ–ª–∞–¥ –º–æ–ª–æ—á–Ω—ã–π", "calories": 535, "emoji": "üç´"},
    "–∫–æ–Ω—Ñ–µ—Ç—ã": {"name": "–ö–æ–Ω—Ñ–µ—Ç—ã —à–æ–∫–æ–ª–∞–¥–Ω—ã–µ", "calories": 500, "emoji": "üç¨"},
    "–ø–æ–Ω—á–∏–∫": {"name": "–ü–æ–Ω—á–∏–∫", "calories": 420, "emoji": "üç©"},
    "–∫—Ä—É–∞—Å—Å–∞–Ω": {"name": "–ö—Ä—É–∞—Å—Å–∞–Ω", "calories": 406, "emoji": "ü•ê"},
    "–±–ª–∏–Ω—ã": {"name": "–ë–ª–∏–Ω—ã", "calories": 233, "emoji": "ü•û"},
    "–≤–∞—Ñ–ª–∏": {"name": "–í–∞—Ñ–ª–∏", "calories": 342, "emoji": "üßá"},
    
    # –§–∞—Å—Ç—Ñ—É–¥
    "–ø–∏—Ü—Ü–∞": {"name": "–ü–∏—Ü—Ü–∞", "calories": 266, "emoji": "üçï"},
    "–±—É—Ä–≥–µ—Ä": {"name": "–ë—É—Ä–≥–µ—Ä", "calories": 295, "emoji": "üçî"},
    "—Ö–æ—Ç-–¥–æ–≥": {"name": "–•–æ—Ç-–¥–æ–≥", "calories": 290, "emoji": "üå≠"},
    "–∫–∞—Ä—Ç–æ—à–∫–∞ —Ñ—Ä–∏": {"name": "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏", "calories": 312, "emoji": "üçü"},
    "–Ω–∞–≥–≥–µ—Ç—Å—ã": {"name": "–ù–∞–≥–≥–µ—Ç—Å—ã –∫—É—Ä–∏–Ω—ã–µ", "calories": 297, "emoji": "üçó"},
    "—à–∞—É—Ä–º–∞": {"name": "–®–∞—É—Ä–º–∞", "calories": 215, "emoji": "üåØ"},
    "—Ä–æ–ª–ª—ã": {"name": "–†–æ–ª–ª—ã", "calories": 150, "emoji": "üç£"},
    "—Å—É—à–∏": {"name": "–°—É—à–∏", "calories": 145, "emoji": "üç£"},
    
    # –°—É–ø—ã
    "–±–æ—Ä—â": {"name": "–ë–æ—Ä—â", "calories": 49, "emoji": "üç≤"},
    "—â–∏": {"name": "–©–∏", "calories": 31, "emoji": "üç≤"},
    "–∫—É—Ä–∏–Ω—ã–π —Å—É–ø": {"name": "–ö—É—Ä–∏–Ω—ã–π —Å—É–ø", "calories": 36, "emoji": "üç≤"},
    "—Å–æ–ª—è–Ω–∫–∞": {"name": "–°–æ–ª—è–Ω–∫–∞", "calories": 69, "emoji": "üç≤"},
    "–æ–∫—Ä–æ—à–∫–∞": {"name": "–û–∫—Ä–æ—à–∫–∞", "calories": 52, "emoji": "üç≤"},
    "—É—Ö–∞": {"name": "–£—Ö–∞", "calories": 46, "emoji": "üç≤"},
    
    # –î—Ä—É–≥–æ–µ
    "—è–π—Ü–æ": {"name": "–Ø–π—Ü–æ –∫—É—Ä–∏–Ω–æ–µ", "calories": 155, "emoji": "ü•ö"},
    "—è–∏—á–Ω–∏—Ü–∞": {"name": "–Ø–∏—á–Ω–∏—Ü–∞", "calories": 196, "emoji": "üç≥"},
    "–æ–º–ª–µ—Ç": {"name": "–û–º–ª–µ—Ç", "calories": 154, "emoji": "üç≥"},
    "–æ—Ä–µ—Ö–∏": {"name": "–û—Ä–µ—Ö–∏ (–º–∏–∫—Å)", "calories": 607, "emoji": "ü•ú"},
    "–º—ë–¥": {"name": "–ú—ë–¥", "calories": 304, "emoji": "üçØ"},
    "—Å–∞—Ö–∞—Ä": {"name": "–°–∞—Ö–∞—Ä", "calories": 387, "emoji": "üç¨"},
    "–æ–ª–∏–≤–∫–∏": {"name": "–û–ª–∏–≤–∫–∏", "calories": 115, "emoji": "ü´í"},
    "–∞–≤–æ–∫–∞–¥–æ": {"name": "–ê–≤–æ–∫–∞–¥–æ", "calories": 160, "emoji": "ü•ë"},
}


async def get_food_info_from_api(product_name: str) -> Optional[Dict[str, Any]]:
    """
    –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–µ –∏–∑ OpenFoodFacts API
    """
    url = f"https://world.openfoodfacts.org/cgi/search.pl"
    params = {
        "action": "process",
        "search_terms": product_name,
        "json": "true",
        "page_size": 5
    }
    
    try:
        async with aiohttp.ClientSession() as session:
            async with session.get(url, params=params) as response:
                if response.status == 200:
                    data = await response.json()
                    products = data.get('products', [])
                    
                    # –ò—â–µ–º –ø—Ä–æ–¥—É–∫—Ç —Å –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å—é
                    for product in products:
                        calories = product.get('nutriments', {}).get('energy-kcal_100g')
                        if calories and calories > 0:
                            return {
                                'name': product.get('product_name', product_name),
                                'calories': calories,
                                'emoji': 'üçΩÔ∏è'
                            }
                    return None
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ OpenFoodFacts API: {e}")
        return None


async def translate_to_english(text: str) -> str:
    """–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ API"""
    try:
        translator = Translator()
        result = translator.translate(text, dest='en')
        return result.text
    except Exception:
        return text


async def get_food_info(product_name: str) -> Optional[Dict[str, Any]]:
    """
    –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–µ (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–æ–∏—Å–∫)
    
    1. –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ (–±–æ–ª–µ–µ —Ç–æ—á–Ω–æ –¥–ª—è —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π)
    2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ - –∏—â–µ–º –≤ OpenFoodFacts API
    3. –ü—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∏ –∏—Å–∫–∞—Ç—å —Å–Ω–æ–≤–∞
    """
    # –ü—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É –¥–ª—è –ø–æ–∏—Å–∫–∞
    search_name = product_name.lower().strip()
    
    # 1. –ü–æ–∏—Å–∫ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
    if search_name in FOOD_DATABASE:
        return FOOD_DATABASE[search_name]
    
    # 2. –ü–æ–∏—Å–∫ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
    for key, value in FOOD_DATABASE.items():
        if key in search_name or search_name in key:
            return value
    
    # 3. –ü–æ–∏—Å–∫ –≤ OpenFoodFacts API
    api_result = await get_food_info_from_api(product_name)
    if api_result:
        return api_result
    
    # 4. –ü—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∏ –∏—Å–∫–∞—Ç—å —Å–Ω–æ–≤–∞
    english_name = await translate_to_english(product_name)
    if english_name.lower() != product_name.lower():
        api_result = await get_food_info_from_api(english_name)
        if api_result:
            api_result['name'] = product_name.capitalize()  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä—É—Å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
            return api_result
    
    return None


def get_low_calorie_recommendations() -> List[Dict[str, Any]]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∏–∑–∫–æ–∫–∞–ª–æ—Ä–∏–π–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π"""
    low_cal_products = []
    for key, value in FOOD_DATABASE.items():
        if value['calories'] <= 50:
            low_cal_products.append({
                'name': value['name'],
                'calories': value['calories'],
                'emoji': value['emoji']
            })
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç–∏
    low_cal_products.sort(key=lambda x: x['calories'])
    return low_cal_products[:10]  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ø-10


def get_high_protein_recommendations() -> List[Dict[str, Any]]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –±–µ–ª–∫–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π"""
    protein_products = [
        {"name": "–ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞", "calories": 165, "protein": 31, "emoji": "üçó"},
        {"name": "–¢–≤–æ—Ä–æ–≥ 5%", "calories": 121, "protein": 18, "emoji": "üßÄ"},
        {"name": "–¢—É–Ω–µ—Ü", "calories": 132, "protein": 29, "emoji": "üêü"},
        {"name": "–Ø–π—Ü–æ", "calories": 155, "protein": 13, "emoji": "ü•ö"},
        {"name": "–ò–Ω–¥–µ–π–∫–∞", "calories": 135, "protein": 29, "emoji": "ü¶É"},
        {"name": "–õ–æ—Å–æ—Å—å", "calories": 208, "protein": 20, "emoji": "üç£"},
        {"name": "–ì—Ä–µ—á–µ—Å–∫–∏–π –π–æ–≥—É—Ä—Ç", "calories": 59, "protein": 10, "emoji": "ü•õ"},
        {"name": "–ö—Ä–µ–≤–µ—Ç–∫–∏", "calories": 99, "protein": 24, "emoji": "ü¶ê"},
    ]
    return protein_products


